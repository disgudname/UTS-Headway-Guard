var myCamTimer,myCamTimeout,myCamAutoPlayTimer,myCamAutoPlayTimeout,myCamAutoPlayIsFullScreen=0,myCamAutoPlaySeconds=10,myCamAutoPlaySecondsLog,myCamAutoPlayStart=0,camOrdinalNextIdx=0,dial1;function LoadStreamingCamera(camOrdinal){arrCam=myCams[camOrdinal].split("|"),LoadStreamingCam(arrCam[3])}function LoadAnotherCam(camOrdinal){try{stopCameraPlayBack()}catch(err){}try{$("#myCam").remove()}catch(err){}try{$("#camRefLink").hide()}catch(err){}try{clearInterval(myCamTimer),clearTimeout(myCamTimeout)}catch(err){}try{clearInterval(myCamAutoPlayTimer)}catch(err){}return LoadCamera(camOrdinal),!1}function LoadCamera(camOrdinal){var dt=new Date,is_d_break=0;try{stopCameraPlayBack()}catch(err){}arrCam=myCams[camOrdinal].split("|"),$("#prevCamLink").show(),$("#nextCamLink").show();try{is_d_break=arrCam[5]}catch(b){is_d_break=0}arrCam[0].length>40?curCamTitle=arrCam[0].substring(0,40)+"...":curCamTitle=arrCam[0],prevCamLink=camOrdinal<=0?1==myCamAutoPlayStart?"<a href='#' id='prevCamLink' onclick='LoadAnotherCam("+(myCams.length-1)+");return false;'>prev&nbsp;camera</a>":"<span style='color:#cccccc;'>prev&nbsp;camera</span>":"<a href='#' id='prevCamLink' onclick='LoadAnotherCam("+(camOrdinal-1)+");return false;'>prev&nbsp;camera</a>",camOrdinal>=myCams.length-1?(nextCamLink=1==myCamAutoPlayStart?"<a href='#' id='nextCamLink' onclick='LoadAnotherCam(0);return false;'>next&nbsp;camera</a>":"<span style='color:#cccccc;'>next&nbsp;camera</span>",camOrdinalNextIdx=0):(nextCamLink="<a href='#' id='nextCamLink' onclick='LoadAnotherCam("+(camOrdinal+1)+");return false;'>next&nbsp;camera</a>",camOrdinalNextIdx=camOrdinal+1);try{$("#myCam").remove()}catch(b){}try{$("#camRefLink").remove()}catch(b){}try{$("#divMyCamViewer").remove()}catch(b){}var pWid=600;winHeight=$(window).height(),winWidth=$(window).width(),calcMinHeight=winHeight<300?winHeight:300,calcMinWidth=winWidth<600?winWidth:600;var camData='<div id="divMyCamViewer" style="text-align:center; overflow: hidden;">  <div>'+prevCamLink+' &lt; &nbsp; <span style="font-size:0.8em;">West Virginia DOT</span> &nbsp; &gt; '+nextCamLink+'</div>  <div id="staticCamHolder" style="position:center;display:none">';1==is_d_break?(camData+='  </div><div id="streamingCamHolder" style="position:center;display:none"></div><div id="camDescription">',camData+=arrCam[7],camData+='</div><div class="viewer-controls"><div id="viewerBtnFull" style="display:none"></div><div id="viewerBtnFullClose" style="display:none"></div></div></div>'):camData+='  </div>  <div id="streamingCamHolder"></div><div class="viewer-controls"><div id="viewerBtnFull" class="viewer-btn" style="display:none;">full screen</div><div id="viewerBtnFullClose" class="viewer-btn" style="display:none;">exit full screen</div></div></div>',dial1=$(camData).appendTo("body");const pageBody=document.body;let vFS=sessionStorage.getItem("vidFullScreen");return document.addEventListener("fullscreenchange",(function(){document.fullscreenElement||(sessionStorage.removeItem("vidFullScreen"),pageBody.classList.remove("streamingVidfullScreen"))})),"1"==vFS&&pageBody.classList.add("streamingVidfullScreen"),dial1.dialog({dialogClass:"diagClass",modal:!0,open:function(type,data){},draggable:!1,title:curCamTitle,close:function(e){sessionStorage.removeItem("vidFullScreen"),pageBody.classList.remove("streamingVidfullScreen"),document.fullscreenElement&&document.exitFullscreen().catch(err=>console.error("Failed to exit fullscreen:",err));try{stopCameraPlayBack()}catch(err){console.error("stopCameraPlayBack:",err)}try{$("#myCam").remove()}catch(err){console.error("#myCam:",err)}try{$("#camRefLink").hide()}catch(err){console.error("#camRefLink:",err)}stopCamRefresh(),myCamAutoPlayStart=0,myCamAutoPlayIsFullScreen=0;try{clearInterval(myCamTimer),clearTimeout(myCamTimeout)}catch(err){console.error("clearInterval/clearTimeout:",err)}try{clearInterval(myCamAutoPlayTimer)}catch(err){console.error("clear myCamAutoPlayTimer:",err)}},create:function(event,ui){$("body").css({overflow:"hidden"})},beforeClose:function(event,ui){$("body").css({overflow:"inherit"})},resizable:!1}),1==is_d_break||LoadCam(arrCam[3]),!1}function refreshCamera(){}function startCamRefresh(){}function stopCamRefresh(){}function removeIframeFullScreenBtn(){let iframe,elmnt;document.getElementById("trafficCamPlayer").contentWindow.document.getElementById("fullScreenBtn").style.display="none"}function startLoadCameraAuto(){myCamAutoPlayStart=1,LoadCamera(0)}function attachCamAutoPlayTimer(dv){clearInterval(myCamAutoPlayTimer),myCamAutoPlaySecondsLog=myCamAutoPlaySeconds,myCamAutoPlayTimer=setInterval((function(){refreshCamAutoPlayTimer(dv)}),1e3)}function refreshCamAutoPlayTimer(dv,nm){dv.html(myCamAutoPlaySecondsLog),dv.show(),--myCamAutoPlaySecondsLog<0&&(dv.html(""),dv.hide(),clearInterval(myCamAutoPlayTimer),LoadAnotherCam(camOrdinalNextIdx))}$((function(){$(window).on("iframeready",(function(e){document.querySelector("#trafficCamPlayer").style.height="100%",1==myCamAutoPlayStart&&attachCamAutoPlayTimer($("#trafficCamPlayer").contents().find("#dvCamNotes"))}))}));